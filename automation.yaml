### TURN ON THE LIGHTS AROUND SUNSET
  - alias: 'Light on Sunset'  
    trigger:
      - platform: sun
        event: sunset
        offset: "-00:30:00"
      - platform: time
        at: '17:00'
    action:
      - service: homeassistant.turn_on
        entity_id: switch.porch_lights_switch
### TURN OFF THE LIGHTS AT SUNRISE
  - alias: 'Light off Sunrise'  
    trigger:
      - platform: sun
        event: sunrise
        offset: "+00:10:00"
      - platform: time
        at: '6:45'
    action:
     - service: homeassistant.turn_off
       entity_id: switch.porch_lights_switch
### OTHER AUTOMATIONS
  - alias: Crime Report Incident
    initial_state: True
    trigger:
       - platform: event
         event_type: crimereports_incident
    action:
       - service: notify.mypushbullet
         data_template:
           message: >
            {{ trigger.event.data.type }}, {{ trigger.event.data.description }}, occured at {{ trigger.event.data.location | title }} {{ (as_timestamp(trigger.event.data.timestamp) | int | timestamp_custom('%A at %I:%M %P')) | replace(' 0', ' ') }}.
  - alias: 'Shed light on motion'
    trigger:
      - platform: state
        entity_id: binary_sensor.shed_motion
        from: 'off'
        to: 'on'
    condition: 
      condition: or
      conditions:
        - condition: sun
          after: sunset
          after_offset: "-0:30:00"
        - condition: sun
          before: sunrise
          before_offset: "-0:30:00"
        - condition: state
          entity_id: sun.sun
          state: 'below_horizon'
        - condition: state
          entity_id: switch.shed_light_switch
          state: 'off'
    action:
      - service: homeassistant.turn_on
        entity_id: switch.shed_light_switch
      - service: notify.mypushbullet
        data_template: 
          message: "The light turned on in the shed"
  - alias: 'Shed light off motion with delay'
    trigger:
      platform: state
      entity_id: switch.shed_light_switch
      from: 'off'
      to: 'on'
      for:
        minutes: 10
    action:
      - service: homeassistant.turn_off
        entity_id: switch.shed_light_switch

#################################################################
## HASS Related
#################################################################
### CONFIGURE FRONTEND THEMES
  - alias: 'Set theme at startup'
    initial_state: 'on'
    trigger:
     - platform: homeassistant
       event: start
    action:
      service: frontend.set_theme
      data:
        name: darkcyan
  - alias: 'Set dark theme for the night'
    initial_state: True
    trigger:
      - platform: time
        at: '21:00'
    action:
      - service: frontend.set_theme
        data:
          name: darkred
  - id: change_current_theme
    alias: 'Change Current Theme'
    initial_state: 'on'
    trigger:
      - platform: state
        entity_id: input_select.current_theme
    action:
      - service: frontend.set_theme
        data_template:
          name: '{{states.input_select.current_theme.state}}'
### HEAL ZWAVE NETWORK DAILY
  - id: heal_zwave_network
    alias: Heal Z-Wave Network
    initial_state: 'off'
    trigger:
      platform: time
      at: '12:31:00'
    action:
     - service: zwave.heal_network
       data_template: 
         message: "zwave nework healed."
  - alias: Update notifications
    trigger:
     - platform: state
       entity_id: updater.updater
    action:
     - service: notify.mypushbullet
       data_template: 
         message: "Home Assistant  {{ states.updater.updater.state }}  is now available."
